(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
'use strict';

var svg = document.getElementById('alaska-map');
var timeoutShow, timeoutHide, listenersAreOn;

dataOverlay();
addEventListeners();

document.querySelector('body').addEventListener('click', addEventListeners);

function addEventListeners() {
	console.log('add');
	if (listenersAreOn !== true) {
		listenersAreOn = true;
		document.querySelectorAll('line.active').forEach(function (l) {
			// need to handle line opacity via css class so that it can be selected here
			l.classList.remove('active');
		});
		var activeNode = document.querySelector('circle.active');
		if (activeNode) {
			activeNode.classList.remove('active');
		}
		svg.querySelectorAll('circle').forEach(function (c) {
			c.addEventListener('mouseenter', activate);
			c.addEventListener('mouseleave', deactivate);
			c.addEventListener('click', removeEventListeners);
		});
	}
}

function removeEventListeners(e) {
	listenersAreOn = false;
	e.stopPropagation();
	svg.querySelectorAll('circle').forEach(function (c) {
		c.removeEventListener('mouseenter', activate);
		c.removeEventListener('mouseleave', deactivate);
		c.removeEventListener('click', removeEventListeners);
	});
}

function activate() {
	this.classList.add('active');
	showLinks(this.dataset);
	showDetails(this.dataset);
}

function deactivate() {
	this.classList.remove('active');
	hideLinks(this.dataset);
	hideDetails();
}

function showLinks(d) {
	svg.querySelectorAll('line.' + d.name).forEach(function (l) {
		l.style.display = 'initial';
		l.style.opacity = 0.6;
	});
}
function hideLinks(d) {
	svg.querySelectorAll('line.' + d.name).forEach(function (l) {
		l.style.opacity = 0.3;
	});
	svg.querySelectorAll('line.below-threshold.' + d.name).forEach(function (l) {
		l.style.display = 'none';
	});
}
function showDetails(d) {
	clearTimeout(timeoutHide);
	var html = '<b>' + d.name + '</b><br /><b>Species</b>: ' + d.species + ' | <b>Gear</b>: ' + d.gear + ' | <b>Area</b>: ' + d.area + ' | <b>Number of permits</b>: ' + d.count;
	var overlayDiv = document.getElementById('overlay-div');
	overlayDiv.style.opacity = 0;
	timeoutShow = setTimeout(function () {
		overlayDiv.innerHTML = html;
		overlayDiv.style.opacity = 1;
	}, 250);
}
function hideDetails() {
	clearTimeout(timeoutShow);
	var html = 'Select a fishery for details.';
	var overlayDiv = document.getElementById('overlay-div');
	overlayDiv.style.opacity = 0;
	timeoutHide = setTimeout(function () {
		overlayDiv.innerHTML = html;
		overlayDiv.style.opacity = 1;
	}, 250);
}
function dataOverlay() {
	var overlayDiv = document.createElement('div');
	overlayDiv.id = 'overlay-div';
	overlayDiv.innerHTML = 'Select a fishery for details.';
	document.getElementById('map-container').appendChild(overlayDiv);
}

},{}]},{},[1])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9ncnVudC1icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJkZXYtanMvbWFpbi5lczYiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7OztBQ0FBLElBQUksTUFBTSxTQUFTLGNBQVQsQ0FBd0IsWUFBeEIsQ0FBVjtBQUNBLElBQUksV0FBSixFQUNDLFdBREQsRUFFQyxjQUZEOztBQU1BO0FBQ0E7O0FBRUEsU0FBUyxhQUFULENBQXVCLE1BQXZCLEVBQStCLGdCQUEvQixDQUFnRCxPQUFoRCxFQUF5RCxpQkFBekQ7O0FBRUEsU0FBUyxpQkFBVCxHQUE0QjtBQUMzQixTQUFRLEdBQVIsQ0FBWSxLQUFaO0FBQ0EsS0FBSyxtQkFBbUIsSUFBeEIsRUFBOEI7QUFDN0IsbUJBQWlCLElBQWpCO0FBQ0EsV0FBUyxnQkFBVCxDQUEwQixhQUExQixFQUF5QyxPQUF6QyxDQUFpRCxhQUFLO0FBQUU7QUFDdkQsS0FBRSxTQUFGLENBQVksTUFBWixDQUFtQixRQUFuQjtBQUNBLEdBRkQ7QUFHQSxNQUFJLGFBQWEsU0FBUyxhQUFULENBQXVCLGVBQXZCLENBQWpCO0FBQ0EsTUFBSyxVQUFMLEVBQWtCO0FBQ2pCLGNBQVcsU0FBWCxDQUFxQixNQUFyQixDQUE0QixRQUE1QjtBQUNBO0FBQ0QsTUFBSSxnQkFBSixDQUFxQixRQUFyQixFQUErQixPQUEvQixDQUF1QyxhQUFLO0FBQzNDLEtBQUUsZ0JBQUYsQ0FBbUIsWUFBbkIsRUFBaUMsUUFBakM7QUFDQSxLQUFFLGdCQUFGLENBQW1CLFlBQW5CLEVBQWlDLFVBQWpDO0FBQ0EsS0FBRSxnQkFBRixDQUFtQixPQUFuQixFQUE0QixvQkFBNUI7QUFDQSxHQUpEO0FBS0E7QUFDRDs7QUFFRCxTQUFTLG9CQUFULENBQThCLENBQTlCLEVBQWdDO0FBQy9CLGtCQUFpQixLQUFqQjtBQUNBLEdBQUUsZUFBRjtBQUNBLEtBQUksZ0JBQUosQ0FBcUIsUUFBckIsRUFBK0IsT0FBL0IsQ0FBdUMsYUFBSztBQUMzQyxJQUFFLG1CQUFGLENBQXNCLFlBQXRCLEVBQW9DLFFBQXBDO0FBQ0EsSUFBRSxtQkFBRixDQUFzQixZQUF0QixFQUFvQyxVQUFwQztBQUNBLElBQUUsbUJBQUYsQ0FBc0IsT0FBdEIsRUFBK0Isb0JBQS9CO0FBQ0EsRUFKRDtBQUtBOztBQUVELFNBQVMsUUFBVCxHQUFtQjtBQUNsQixNQUFLLFNBQUwsQ0FBZSxHQUFmLENBQW1CLFFBQW5CO0FBQ0EsV0FBVSxLQUFLLE9BQWY7QUFDQSxhQUFZLEtBQUssT0FBakI7QUFDQTs7QUFFRCxTQUFTLFVBQVQsR0FBcUI7QUFDcEIsTUFBSyxTQUFMLENBQWUsTUFBZixDQUFzQixRQUF0QjtBQUNBLFdBQVUsS0FBSyxPQUFmO0FBQ0E7QUFDQTs7QUFFRCxTQUFTLFNBQVQsQ0FBbUIsQ0FBbkIsRUFBcUI7QUFDcEIsS0FBSSxnQkFBSixDQUFxQixVQUFVLEVBQUUsSUFBakMsRUFBdUMsT0FBdkMsQ0FBK0MsYUFBSztBQUNuRCxJQUFFLEtBQUYsQ0FBUSxPQUFSLEdBQWtCLFNBQWxCO0FBQ0EsSUFBRSxLQUFGLENBQVEsT0FBUixHQUFrQixHQUFsQjtBQUNBLEVBSEQ7QUFJQTtBQUNELFNBQVMsU0FBVCxDQUFtQixDQUFuQixFQUFxQjtBQUNwQixLQUFJLGdCQUFKLENBQXFCLFVBQVUsRUFBRSxJQUFqQyxFQUF1QyxPQUF2QyxDQUErQyxhQUFLO0FBQ25ELElBQUUsS0FBRixDQUFRLE9BQVIsR0FBa0IsR0FBbEI7QUFDQSxFQUZEO0FBR0EsS0FBSSxnQkFBSixDQUFxQiwwQkFBMEIsRUFBRSxJQUFqRCxFQUF1RCxPQUF2RCxDQUErRCxhQUFLO0FBQ25FLElBQUUsS0FBRixDQUFRLE9BQVIsR0FBa0IsTUFBbEI7QUFDQSxFQUZEO0FBR0E7QUFDRCxTQUFTLFdBQVQsQ0FBcUIsQ0FBckIsRUFBdUI7QUFDdEIsY0FBYSxXQUFiO0FBQ0EsS0FBSSxlQUFhLEVBQUUsSUFBZixrQ0FBZ0QsRUFBRSxPQUFsRCx3QkFBNEUsRUFBRSxJQUE5RSx3QkFBcUcsRUFBRSxJQUF2RyxxQ0FBMkksRUFBRSxLQUFqSjtBQUNBLEtBQUksYUFBYSxTQUFTLGNBQVQsQ0FBd0IsYUFBeEIsQ0FBakI7QUFDQSxZQUFXLEtBQVgsQ0FBaUIsT0FBakIsR0FBMkIsQ0FBM0I7QUFDQSxlQUFjLFdBQVcsWUFBVTtBQUNsQyxhQUFXLFNBQVgsR0FBdUIsSUFBdkI7QUFDQSxhQUFXLEtBQVgsQ0FBaUIsT0FBakIsR0FBMkIsQ0FBM0I7QUFDQSxFQUhhLEVBR1osR0FIWSxDQUFkO0FBSUE7QUFDRCxTQUFTLFdBQVQsR0FBc0I7QUFDckIsY0FBYSxXQUFiO0FBQ0EsS0FBSSxPQUFPLCtCQUFYO0FBQ0EsS0FBSSxhQUFhLFNBQVMsY0FBVCxDQUF3QixhQUF4QixDQUFqQjtBQUNBLFlBQVcsS0FBWCxDQUFpQixPQUFqQixHQUEyQixDQUEzQjtBQUNBLGVBQWMsV0FBVyxZQUFVO0FBQ2xDLGFBQVcsU0FBWCxHQUF1QixJQUF2QjtBQUNBLGFBQVcsS0FBWCxDQUFpQixPQUFqQixHQUEyQixDQUEzQjtBQUNBLEVBSGEsRUFHWixHQUhZLENBQWQ7QUFLQTtBQUNELFNBQVMsV0FBVCxHQUFzQjtBQUNyQixLQUFJLGFBQWEsU0FBUyxhQUFULENBQXVCLEtBQXZCLENBQWpCO0FBQ0EsWUFBVyxFQUFYLEdBQWdCLGFBQWhCO0FBQ0EsWUFBVyxTQUFYLEdBQXVCLCtCQUF2QjtBQUNBLFVBQVMsY0FBVCxDQUF3QixlQUF4QixFQUF5QyxXQUF6QyxDQUFxRCxVQUFyRDtBQUNBIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oKXtmdW5jdGlvbiByKGUsbix0KXtmdW5jdGlvbiBvKGksZil7aWYoIW5baV0pe2lmKCFlW2ldKXt2YXIgYz1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2lmKCFmJiZjKXJldHVybiBjKGksITApO2lmKHUpcmV0dXJuIHUoaSwhMCk7dmFyIGE9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitpK1wiJ1wiKTt0aHJvdyBhLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsYX12YXIgcD1uW2ldPXtleHBvcnRzOnt9fTtlW2ldWzBdLmNhbGwocC5leHBvcnRzLGZ1bmN0aW9uKHIpe3ZhciBuPWVbaV1bMV1bcl07cmV0dXJuIG8obnx8cil9LHAscC5leHBvcnRzLHIsZSxuLHQpfXJldHVybiBuW2ldLmV4cG9ydHN9Zm9yKHZhciB1PVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUsaT0wO2k8dC5sZW5ndGg7aSsrKW8odFtpXSk7cmV0dXJuIG99cmV0dXJuIHJ9KSgpIiwidmFyIHN2ZyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhbGFza2EtbWFwJyk7XG52YXIgdGltZW91dFNob3csXG5cdHRpbWVvdXRIaWRlLFxuXHRsaXN0ZW5lcnNBcmVPbjtcblxuXG5cbmRhdGFPdmVybGF5KCk7XG5hZGRFdmVudExpc3RlbmVycygpO1xuXG5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdib2R5JykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhZGRFdmVudExpc3RlbmVycyk7XG5cbmZ1bmN0aW9uIGFkZEV2ZW50TGlzdGVuZXJzKCl7XG5cdGNvbnNvbGUubG9nKCdhZGQnKTtcblx0aWYgKCBsaXN0ZW5lcnNBcmVPbiAhPT0gdHJ1ZSApe1xuXHRcdGxpc3RlbmVyc0FyZU9uID0gdHJ1ZTtcblx0XHRkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdsaW5lLmFjdGl2ZScpLmZvckVhY2gobCA9PiB7IC8vIG5lZWQgdG8gaGFuZGxlIGxpbmUgb3BhY2l0eSB2aWEgY3NzIGNsYXNzIHNvIHRoYXQgaXQgY2FuIGJlIHNlbGVjdGVkIGhlcmVcblx0XHRcdGwuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XG5cdFx0fSk7XG5cdFx0dmFyIGFjdGl2ZU5vZGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdjaXJjbGUuYWN0aXZlJyk7XG5cdFx0aWYgKCBhY3RpdmVOb2RlICkge1xuXHRcdFx0YWN0aXZlTm9kZS5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcblx0XHR9XG5cdFx0c3ZnLnF1ZXJ5U2VsZWN0b3JBbGwoJ2NpcmNsZScpLmZvckVhY2goYyA9PiB7XG5cdFx0XHRjLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZW50ZXInLCBhY3RpdmF0ZSk7XG5cdFx0XHRjLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLCBkZWFjdGl2YXRlKTtcblx0XHRcdGMuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCByZW1vdmVFdmVudExpc3RlbmVycyk7XG5cdFx0fSk7XG5cdH1cbn1cblxuZnVuY3Rpb24gcmVtb3ZlRXZlbnRMaXN0ZW5lcnMoZSl7XG5cdGxpc3RlbmVyc0FyZU9uID0gZmFsc2U7XG5cdGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdHN2Zy5xdWVyeVNlbGVjdG9yQWxsKCdjaXJjbGUnKS5mb3JFYWNoKGMgPT4ge1xuXHRcdGMucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2VlbnRlcicsIGFjdGl2YXRlKTtcblx0XHRjLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLCBkZWFjdGl2YXRlKTtcblx0XHRjLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgcmVtb3ZlRXZlbnRMaXN0ZW5lcnMpO1xuXHR9KTtcbn1cblxuZnVuY3Rpb24gYWN0aXZhdGUoKXtcblx0dGhpcy5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcblx0c2hvd0xpbmtzKHRoaXMuZGF0YXNldCk7XG5cdHNob3dEZXRhaWxzKHRoaXMuZGF0YXNldCk7XG59XG5cbmZ1bmN0aW9uIGRlYWN0aXZhdGUoKXtcblx0dGhpcy5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcblx0aGlkZUxpbmtzKHRoaXMuZGF0YXNldCk7XG5cdGhpZGVEZXRhaWxzKCk7XG59XG5cbmZ1bmN0aW9uIHNob3dMaW5rcyhkKXtcblx0c3ZnLnF1ZXJ5U2VsZWN0b3JBbGwoJ2xpbmUuJyArIGQubmFtZSkuZm9yRWFjaChsID0+IHtcblx0XHRsLnN0eWxlLmRpc3BsYXkgPSAnaW5pdGlhbCc7XG5cdFx0bC5zdHlsZS5vcGFjaXR5ID0gMC42O1xuXHR9KTtcbn1cbmZ1bmN0aW9uIGhpZGVMaW5rcyhkKXtcblx0c3ZnLnF1ZXJ5U2VsZWN0b3JBbGwoJ2xpbmUuJyArIGQubmFtZSkuZm9yRWFjaChsID0+IHtcblx0XHRsLnN0eWxlLm9wYWNpdHkgPSAwLjM7XG5cdH0pO1xuXHRzdmcucXVlcnlTZWxlY3RvckFsbCgnbGluZS5iZWxvdy10aHJlc2hvbGQuJyArIGQubmFtZSkuZm9yRWFjaChsID0+IHtcblx0XHRsLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG5cdH0pO1xufVxuZnVuY3Rpb24gc2hvd0RldGFpbHMoZCl7XG5cdGNsZWFyVGltZW91dCh0aW1lb3V0SGlkZSk7XG5cdHZhciBodG1sID0gYDxiPiR7ZC5uYW1lfTwvYj48YnIgLz48Yj5TcGVjaWVzPC9iPjogJHtkLnNwZWNpZXN9IHwgPGI+R2VhcjwvYj46ICR7ZC5nZWFyfSB8IDxiPkFyZWE8L2I+OiAke2QuYXJlYX0gfCA8Yj5OdW1iZXIgb2YgcGVybWl0czwvYj46ICR7ZC5jb3VudH1gO1xuXHR2YXIgb3ZlcmxheURpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdvdmVybGF5LWRpdicpO1xuXHRvdmVybGF5RGl2LnN0eWxlLm9wYWNpdHkgPSAwO1xuXHR0aW1lb3V0U2hvdyA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcblx0XHRvdmVybGF5RGl2LmlubmVySFRNTCA9IGh0bWw7XG5cdFx0b3ZlcmxheURpdi5zdHlsZS5vcGFjaXR5ID0gMTtcblx0fSwyNTApO1xufVxuZnVuY3Rpb24gaGlkZURldGFpbHMoKXtcblx0Y2xlYXJUaW1lb3V0KHRpbWVvdXRTaG93KTtcblx0dmFyIGh0bWwgPSAnU2VsZWN0IGEgZmlzaGVyeSBmb3IgZGV0YWlscy4nO1xuXHR2YXIgb3ZlcmxheURpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdvdmVybGF5LWRpdicpO1xuXHRvdmVybGF5RGl2LnN0eWxlLm9wYWNpdHkgPSAwO1xuXHR0aW1lb3V0SGlkZSA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcblx0XHRvdmVybGF5RGl2LmlubmVySFRNTCA9IGh0bWw7XG5cdFx0b3ZlcmxheURpdi5zdHlsZS5vcGFjaXR5ID0gMTtcblx0fSwyNTApO1xuXG59XG5mdW5jdGlvbiBkYXRhT3ZlcmxheSgpe1xuXHR2YXIgb3ZlcmxheURpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXHRvdmVybGF5RGl2LmlkID0gJ292ZXJsYXktZGl2Jztcblx0b3ZlcmxheURpdi5pbm5lckhUTUwgPSAnU2VsZWN0IGEgZmlzaGVyeSBmb3IgZGV0YWlscy4nO1xuXHRkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWFwLWNvbnRhaW5lcicpLmFwcGVuZENoaWxkKG92ZXJsYXlEaXYpO1xufSJdfQ==
