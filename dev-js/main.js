(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
'use strict';

var svg = document.getElementById('alaska-map');
var timeoutShow, timeoutHide, listenersAreOn;

dataOverlay();
addEventListeners();

document.querySelector('body').addEventListener('click', addEventListeners);

function addEventListeners() {
	console.log('add');
	if (listenersAreOn !== true) {
		listenersAreOn = true;
		document.querySelectorAll('line.active').forEach(function (l) {
			// need to handle line opacity via css class so that it can be selected here
			l.classList.remove('active');
		});
		var activeNode = document.querySelector('circle.active');
		if (activeNode) {
			activeNode.classList.remove('active');
		}
		svg.querySelectorAll('circle').forEach(function (c) {
			c.addEventListener('mouseenter', activate);
			c.addEventListener('mouseleave', deactivate);
			c.addEventListener('click', removeEventListeners);
		});
	}
}

function removeEventListeners(e) {
	listenersAreOn = false;
	e.stopPropagation();
	svg.querySelectorAll('circle').forEach(function (c) {
		c.removeEventListener('mouseenter', activate);
		c.removeEventListener('mouseleave', deactivate);
		c.removeEventListener('click', removeEventListeners);
	});
}

function activate() {
	this.classList.add('active');
	showLinks(this.dataset);
	showDetails(this.dataset);
}

function deactivate() {
	this.classList.remove('active');
	hideLinks(this.dataset);
	hideDetails();
}

function showLinks(d) {
	svg.querySelectorAll('line.' + d.name).forEach(function (l) {
		l.classList.add('active');
	});
}
function hideLinks(d) {
	svg.querySelectorAll('line.' + d.name).forEach(function (l) {
		l.classList.remove('active');
	});
}
function showDetails(d) {
	clearTimeout(timeoutHide);
	var html = '<b>' + d.name + '</b><br /><b>Species</b>: ' + d.species + ' | <b>Gear</b>: ' + d.gear + ' | <b>Area</b>: ' + d.area + ' | <b>Number of permits</b>: ' + d.count;
	var overlayDiv = document.getElementById('overlay-div');
	overlayDiv.style.opacity = 0;
	timeoutShow = setTimeout(function () {
		overlayDiv.innerHTML = html;
		overlayDiv.style.opacity = 1;
	}, 250);
}
function hideDetails() {
	clearTimeout(timeoutShow);
	var html = 'Select a fishery for details.';
	var overlayDiv = document.getElementById('overlay-div');
	overlayDiv.style.opacity = 0;
	timeoutHide = setTimeout(function () {
		overlayDiv.innerHTML = html;
		overlayDiv.style.opacity = 1;
	}, 250);
}
function dataOverlay() {
	var overlayDiv = document.createElement('div');
	overlayDiv.id = 'overlay-div';
	overlayDiv.innerHTML = 'Select a fishery for details.';
	document.getElementById('map-container').appendChild(overlayDiv);
}

},{}]},{},[1])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9ncnVudC1icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJkZXYtanMvbWFpbi5lczYiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7OztBQ0FBLElBQUksTUFBTSxTQUFTLGNBQVQsQ0FBd0IsWUFBeEIsQ0FBVjtBQUNBLElBQUksV0FBSixFQUNDLFdBREQsRUFFQyxjQUZEOztBQU1BO0FBQ0E7O0FBRUEsU0FBUyxhQUFULENBQXVCLE1BQXZCLEVBQStCLGdCQUEvQixDQUFnRCxPQUFoRCxFQUF5RCxpQkFBekQ7O0FBRUEsU0FBUyxpQkFBVCxHQUE0QjtBQUMzQixTQUFRLEdBQVIsQ0FBWSxLQUFaO0FBQ0EsS0FBSyxtQkFBbUIsSUFBeEIsRUFBOEI7QUFDN0IsbUJBQWlCLElBQWpCO0FBQ0EsV0FBUyxnQkFBVCxDQUEwQixhQUExQixFQUF5QyxPQUF6QyxDQUFpRCxhQUFLO0FBQUU7QUFDdkQsS0FBRSxTQUFGLENBQVksTUFBWixDQUFtQixRQUFuQjtBQUNBLEdBRkQ7QUFHQSxNQUFJLGFBQWEsU0FBUyxhQUFULENBQXVCLGVBQXZCLENBQWpCO0FBQ0EsTUFBSyxVQUFMLEVBQWtCO0FBQ2pCLGNBQVcsU0FBWCxDQUFxQixNQUFyQixDQUE0QixRQUE1QjtBQUNBO0FBQ0QsTUFBSSxnQkFBSixDQUFxQixRQUFyQixFQUErQixPQUEvQixDQUF1QyxhQUFLO0FBQzNDLEtBQUUsZ0JBQUYsQ0FBbUIsWUFBbkIsRUFBaUMsUUFBakM7QUFDQSxLQUFFLGdCQUFGLENBQW1CLFlBQW5CLEVBQWlDLFVBQWpDO0FBQ0EsS0FBRSxnQkFBRixDQUFtQixPQUFuQixFQUE0QixvQkFBNUI7QUFDQSxHQUpEO0FBS0E7QUFDRDs7QUFFRCxTQUFTLG9CQUFULENBQThCLENBQTlCLEVBQWdDO0FBQy9CLGtCQUFpQixLQUFqQjtBQUNBLEdBQUUsZUFBRjtBQUNBLEtBQUksZ0JBQUosQ0FBcUIsUUFBckIsRUFBK0IsT0FBL0IsQ0FBdUMsYUFBSztBQUMzQyxJQUFFLG1CQUFGLENBQXNCLFlBQXRCLEVBQW9DLFFBQXBDO0FBQ0EsSUFBRSxtQkFBRixDQUFzQixZQUF0QixFQUFvQyxVQUFwQztBQUNBLElBQUUsbUJBQUYsQ0FBc0IsT0FBdEIsRUFBK0Isb0JBQS9CO0FBQ0EsRUFKRDtBQUtBOztBQUVELFNBQVMsUUFBVCxHQUFtQjtBQUNsQixNQUFLLFNBQUwsQ0FBZSxHQUFmLENBQW1CLFFBQW5CO0FBQ0EsV0FBVSxLQUFLLE9BQWY7QUFDQSxhQUFZLEtBQUssT0FBakI7QUFDQTs7QUFFRCxTQUFTLFVBQVQsR0FBcUI7QUFDcEIsTUFBSyxTQUFMLENBQWUsTUFBZixDQUFzQixRQUF0QjtBQUNBLFdBQVUsS0FBSyxPQUFmO0FBQ0E7QUFDQTs7QUFFRCxTQUFTLFNBQVQsQ0FBbUIsQ0FBbkIsRUFBcUI7QUFDcEIsS0FBSSxnQkFBSixDQUFxQixVQUFVLEVBQUUsSUFBakMsRUFBdUMsT0FBdkMsQ0FBK0MsYUFBSztBQUNuRCxJQUFFLFNBQUYsQ0FBWSxHQUFaLENBQWdCLFFBQWhCO0FBQ0EsRUFGRDtBQUdBO0FBQ0QsU0FBUyxTQUFULENBQW1CLENBQW5CLEVBQXFCO0FBQ3BCLEtBQUksZ0JBQUosQ0FBcUIsVUFBVSxFQUFFLElBQWpDLEVBQXVDLE9BQXZDLENBQStDLGFBQUs7QUFDbkQsSUFBRSxTQUFGLENBQVksTUFBWixDQUFtQixRQUFuQjtBQUNBLEVBRkQ7QUFHQTtBQUNELFNBQVMsV0FBVCxDQUFxQixDQUFyQixFQUF1QjtBQUN0QixjQUFhLFdBQWI7QUFDQSxLQUFJLGVBQWEsRUFBRSxJQUFmLGtDQUFnRCxFQUFFLE9BQWxELHdCQUE0RSxFQUFFLElBQTlFLHdCQUFxRyxFQUFFLElBQXZHLHFDQUEySSxFQUFFLEtBQWpKO0FBQ0EsS0FBSSxhQUFhLFNBQVMsY0FBVCxDQUF3QixhQUF4QixDQUFqQjtBQUNBLFlBQVcsS0FBWCxDQUFpQixPQUFqQixHQUEyQixDQUEzQjtBQUNBLGVBQWMsV0FBVyxZQUFVO0FBQ2xDLGFBQVcsU0FBWCxHQUF1QixJQUF2QjtBQUNBLGFBQVcsS0FBWCxDQUFpQixPQUFqQixHQUEyQixDQUEzQjtBQUNBLEVBSGEsRUFHWixHQUhZLENBQWQ7QUFJQTtBQUNELFNBQVMsV0FBVCxHQUFzQjtBQUNyQixjQUFhLFdBQWI7QUFDQSxLQUFJLE9BQU8sK0JBQVg7QUFDQSxLQUFJLGFBQWEsU0FBUyxjQUFULENBQXdCLGFBQXhCLENBQWpCO0FBQ0EsWUFBVyxLQUFYLENBQWlCLE9BQWpCLEdBQTJCLENBQTNCO0FBQ0EsZUFBYyxXQUFXLFlBQVU7QUFDbEMsYUFBVyxTQUFYLEdBQXVCLElBQXZCO0FBQ0EsYUFBVyxLQUFYLENBQWlCLE9BQWpCLEdBQTJCLENBQTNCO0FBQ0EsRUFIYSxFQUdaLEdBSFksQ0FBZDtBQUtBO0FBQ0QsU0FBUyxXQUFULEdBQXNCO0FBQ3JCLEtBQUksYUFBYSxTQUFTLGFBQVQsQ0FBdUIsS0FBdkIsQ0FBakI7QUFDQSxZQUFXLEVBQVgsR0FBZ0IsYUFBaEI7QUFDQSxZQUFXLFNBQVgsR0FBdUIsK0JBQXZCO0FBQ0EsVUFBUyxjQUFULENBQXdCLGVBQXhCLEVBQXlDLFdBQXpDLENBQXFELFVBQXJEO0FBQ0EiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpe2Z1bmN0aW9uIHIoZSxuLHQpe2Z1bmN0aW9uIG8oaSxmKXtpZighbltpXSl7aWYoIWVbaV0pe3ZhciBjPVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIWYmJmMpcmV0dXJuIGMoaSwhMCk7aWYodSlyZXR1cm4gdShpLCEwKTt2YXIgYT1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK2krXCInXCIpO3Rocm93IGEuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixhfXZhciBwPW5baV09e2V4cG9ydHM6e319O2VbaV1bMF0uY2FsbChwLmV4cG9ydHMsZnVuY3Rpb24ocil7dmFyIG49ZVtpXVsxXVtyXTtyZXR1cm4gbyhufHxyKX0scCxwLmV4cG9ydHMscixlLG4sdCl9cmV0dXJuIG5baV0uZXhwb3J0c31mb3IodmFyIHU9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZSxpPTA7aTx0Lmxlbmd0aDtpKyspbyh0W2ldKTtyZXR1cm4gb31yZXR1cm4gcn0pKCkiLCJ2YXIgc3ZnID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FsYXNrYS1tYXAnKTtcbnZhciB0aW1lb3V0U2hvdyxcblx0dGltZW91dEhpZGUsXG5cdGxpc3RlbmVyc0FyZU9uO1xuXG5cblxuZGF0YU92ZXJsYXkoKTtcbmFkZEV2ZW50TGlzdGVuZXJzKCk7XG5cbmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2JvZHknKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFkZEV2ZW50TGlzdGVuZXJzKTtcblxuZnVuY3Rpb24gYWRkRXZlbnRMaXN0ZW5lcnMoKXtcblx0Y29uc29sZS5sb2coJ2FkZCcpO1xuXHRpZiAoIGxpc3RlbmVyc0FyZU9uICE9PSB0cnVlICl7XG5cdFx0bGlzdGVuZXJzQXJlT24gPSB0cnVlO1xuXHRcdGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2xpbmUuYWN0aXZlJykuZm9yRWFjaChsID0+IHsgLy8gbmVlZCB0byBoYW5kbGUgbGluZSBvcGFjaXR5IHZpYSBjc3MgY2xhc3Mgc28gdGhhdCBpdCBjYW4gYmUgc2VsZWN0ZWQgaGVyZVxuXHRcdFx0bC5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcblx0XHR9KTtcblx0XHR2YXIgYWN0aXZlTm9kZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2NpcmNsZS5hY3RpdmUnKTtcblx0XHRpZiAoIGFjdGl2ZU5vZGUgKSB7XG5cdFx0XHRhY3RpdmVOb2RlLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xuXHRcdH1cblx0XHRzdmcucXVlcnlTZWxlY3RvckFsbCgnY2lyY2xlJykuZm9yRWFjaChjID0+IHtcblx0XHRcdGMuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VlbnRlcicsIGFjdGl2YXRlKTtcblx0XHRcdGMuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsIGRlYWN0aXZhdGUpO1xuXHRcdFx0Yy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHJlbW92ZUV2ZW50TGlzdGVuZXJzKTtcblx0XHR9KTtcblx0fVxufVxuXG5mdW5jdGlvbiByZW1vdmVFdmVudExpc3RlbmVycyhlKXtcblx0bGlzdGVuZXJzQXJlT24gPSBmYWxzZTtcblx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcblx0c3ZnLnF1ZXJ5U2VsZWN0b3JBbGwoJ2NpcmNsZScpLmZvckVhY2goYyA9PiB7XG5cdFx0Yy5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZWVudGVyJywgYWN0aXZhdGUpO1xuXHRcdGMucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsIGRlYWN0aXZhdGUpO1xuXHRcdGMucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCByZW1vdmVFdmVudExpc3RlbmVycyk7XG5cdH0pO1xufVxuXG5mdW5jdGlvbiBhY3RpdmF0ZSgpe1xuXHR0aGlzLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xuXHRzaG93TGlua3ModGhpcy5kYXRhc2V0KTtcblx0c2hvd0RldGFpbHModGhpcy5kYXRhc2V0KTtcbn1cblxuZnVuY3Rpb24gZGVhY3RpdmF0ZSgpe1xuXHR0aGlzLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xuXHRoaWRlTGlua3ModGhpcy5kYXRhc2V0KTtcblx0aGlkZURldGFpbHMoKTtcbn1cblxuZnVuY3Rpb24gc2hvd0xpbmtzKGQpe1xuXHRzdmcucXVlcnlTZWxlY3RvckFsbCgnbGluZS4nICsgZC5uYW1lKS5mb3JFYWNoKGwgPT4ge1xuXHRcdGwuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XG5cdH0pO1xufVxuZnVuY3Rpb24gaGlkZUxpbmtzKGQpe1xuXHRzdmcucXVlcnlTZWxlY3RvckFsbCgnbGluZS4nICsgZC5uYW1lKS5mb3JFYWNoKGwgPT4ge1xuXHRcdGwuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XG5cdH0pO1xufVxuZnVuY3Rpb24gc2hvd0RldGFpbHMoZCl7XG5cdGNsZWFyVGltZW91dCh0aW1lb3V0SGlkZSk7XG5cdHZhciBodG1sID0gYDxiPiR7ZC5uYW1lfTwvYj48YnIgLz48Yj5TcGVjaWVzPC9iPjogJHtkLnNwZWNpZXN9IHwgPGI+R2VhcjwvYj46ICR7ZC5nZWFyfSB8IDxiPkFyZWE8L2I+OiAke2QuYXJlYX0gfCA8Yj5OdW1iZXIgb2YgcGVybWl0czwvYj46ICR7ZC5jb3VudH1gO1xuXHR2YXIgb3ZlcmxheURpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdvdmVybGF5LWRpdicpO1xuXHRvdmVybGF5RGl2LnN0eWxlLm9wYWNpdHkgPSAwO1xuXHR0aW1lb3V0U2hvdyA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcblx0XHRvdmVybGF5RGl2LmlubmVySFRNTCA9IGh0bWw7XG5cdFx0b3ZlcmxheURpdi5zdHlsZS5vcGFjaXR5ID0gMTtcblx0fSwyNTApO1xufVxuZnVuY3Rpb24gaGlkZURldGFpbHMoKXtcblx0Y2xlYXJUaW1lb3V0KHRpbWVvdXRTaG93KTtcblx0dmFyIGh0bWwgPSAnU2VsZWN0IGEgZmlzaGVyeSBmb3IgZGV0YWlscy4nO1xuXHR2YXIgb3ZlcmxheURpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdvdmVybGF5LWRpdicpO1xuXHRvdmVybGF5RGl2LnN0eWxlLm9wYWNpdHkgPSAwO1xuXHR0aW1lb3V0SGlkZSA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcblx0XHRvdmVybGF5RGl2LmlubmVySFRNTCA9IGh0bWw7XG5cdFx0b3ZlcmxheURpdi5zdHlsZS5vcGFjaXR5ID0gMTtcblx0fSwyNTApO1xuXG59XG5mdW5jdGlvbiBkYXRhT3ZlcmxheSgpe1xuXHR2YXIgb3ZlcmxheURpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXHRvdmVybGF5RGl2LmlkID0gJ292ZXJsYXktZGl2Jztcblx0b3ZlcmxheURpdi5pbm5lckhUTUwgPSAnU2VsZWN0IGEgZmlzaGVyeSBmb3IgZGV0YWlscy4nO1xuXHRkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWFwLWNvbnRhaW5lcicpLmFwcGVuZENoaWxkKG92ZXJsYXlEaXYpO1xufSJdfQ==
